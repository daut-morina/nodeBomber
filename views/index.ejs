<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link rel="stylesheet" href="/stylesheets/bootstrap.min.css" />
        <link rel="stylesheet" href="/stylesheets/style.css" />
    </head>
    <body>
        <button class="btn btn-primary">Bomb 'em!</button>

        <script src="/javascripts/jquery-2.1.0.min.js"></script>
        <script src="/javascripts/bootstrap.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var drawBomb = function() {
                $('body').prepend(
                        '<div class="alert alert-success alert-dismissable">' +
                                '<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>' +
                                '<strong>Yay!</strong> You\'re bomb has been dropped.' +
                                '</div>'
                )
            }

            $("document").ready(function() {
                $(".btn.btn-primary").click(function() {
                    socket.emit('bomb drop', { date: 'dropping bomb' });
                    console.log("Bomb dropped!");
                    drawBomb();
                });
            });

            var socket = io.connect(window.location.hostname);
            socket.on('news', function (data) {
                console.log(data);
                socket.emit('my other event', { my: 'data' });
                console.log(socket.socket.transport);
            });

            socket.on('draw bomb', function() {
                console.log('drawing bomb');
                drawBomb();
            });
        </script>
    </body>
</html>
